(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc496056"],{"0361":function(t,s,e){},1062:function(t,s,e){"use strict";var o=e("ff9c"),i=e.n(o);i.a},"1c43":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"sort"},[e("div",{staticClass:"header"},[e("div",{staticClass:"back",on:{click:t.back}},[e("i",{staticClass:"icon-arrow icon-arrow-l"})]),e("div",{staticClass:"switches-wrapper"},[e("switches",{attrs:{switches:t.switches,currentIndex:t.currentIndex},on:{switch:t.switchItem}})],1),e("div",{staticClass:"search",on:{click:t.search}},[e("i",{staticClass:"search-icon"})])]),e("div",{staticClass:"nav"},[e("ul",{staticClass:"slide"},t._l(t.categoryList,function(s,o){return e("li",{key:o,class:o==t.categoryActive?"active":"",on:{click:function(e){return t.getBookTypes(s.type_id,o)}}},[t._v(t._s(s.type_name))])}),0),e("cube-scroll",{ref:"scroll",staticClass:"book-list-wrap",attrs:{data:t.bookList,options:t.options},on:{"pulling-up":t.onPullingUp}},[e("div",{staticClass:"book-list"},t._l(t.bookList,function(s){return e("router-link",{key:s.book_id,staticClass:"book-item",attrs:{to:"/book/"+s.book_id}},[e("div",{staticClass:"cover"},[e("img",{attrs:{src:s.book_cover}})]),e("div",{staticClass:"text"},[e("h3",[t._v(t._s(s.book_name))]),e("p",{staticClass:"brief"},[t._v(t._s(s.book_brief))]),e("div",{staticClass:"other"},[e("span",{staticClass:"author"},[t._v(t._s(s.author_name))]),e("span",{staticClass:"category"},[t._v(t._s(s.category_name))]),1==s.book_is_action?e("span",{staticClass:"status status2"},[t._v("完结")]):e("span",{staticClass:"status"},[t._v("连载")])])])])}),1)])],1)])},i=[],c=e("31b7"),n={data:function(){return{currentIndex:0,switches:[{name:"男生"},{name:"女生"}],categoryList:[],bookList:[],height:0,categoryActive:0,scrollTop:0,scrollHeight:0,sexType:1,pageIndex:1,typeId:0,isShowMore:!1,pullUpLoad:!0,pullUpLoadThreshold:0,pullUpLoadMoreTxt:"加载中...",pullUpLoadNoMoreTxt:"没有更多数据啦"}},computed:{options:function(){return{pullUpLoad:this.pullUpLoadObj}},pullUpLoadObj:function(){return!!this.pullUpLoad&&{threshold:parseInt(this.pullUpLoadThreshold),txt:{more:this.pullUpLoadMoreTxt,noMore:this.pullUpLoadNoMoreTxt}}}},mounted:function(){var t=this;this.getBookSort(),this.$nextTick(function(){t.$refs.scroll.refresh()})},methods:{switchItem:function(t){this.currentIndex=t,this.getBookSort(t+1)},back:function(){this.$router.back()},search:function(){console.log("点击了搜索Search..")},changeHandler:function(t){console.log("changed to:",t)},stickyChangeHandler:function(t){console.log("sticky-change",t)},getBookSort:function(t){var s=this;this.sexType=t||this.sexType,this.categoryActive=0;var e=2==this.sexType?0:1,o={type:1,gender:e};this.$post("/book/ranks",o).then(function(t){if(1e4===t.code){s.categoryList=t.result;var e=t.result[0].type_id;s.getBookTypes(e)}})},getBookTypes:function(t,s){var e=this;t&&(this.typeId=t,this.pageIndex=1,this.bookList=[],this.isShowMore=!1,this.pullUpLoad=!0),(s||0===s)&&(console.log("index:"+s),this.categoryActive=s);var o={type_id:this.typeId,pn:this.pageIndex};this.$post("/book/types",o).then(function(t){if(1e4===t.code){var s=t.result.book_list;if(e.bookList=e.bookList.concat(s),e.isShowMore=s&&s.length,e.isShowMore)setTimeout(function(){e.$refs.scroll.refresh()},500);else{var o=e.$createToast({txt:"暂无更多书籍",type:"txt",mask:!0,time:2e3});o.show(),e.pullUpLoad=!1,e.$refs.scroll.forceUpdate()}}})},onPullingUp:function(){var t=this;setTimeout(function(){t.pageIndex+=1,t.getBookTypes()},1e3)}},components:{Switches:c["a"]}},a=n,r=(e("1062"),e("2877")),l=Object(r["a"])(a,o,i,!1,null,"54132eb1",null);s["default"]=l.exports},"31b7":function(t,s,e){"use strict";var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",{staticClass:"switches"},t._l(t.switches,function(s,o){return e("li",{key:o,staticClass:"switch-item",class:{active:t.currentIndex===o},on:{click:function(s){return t.switchItem(o)}}},[e("span",[t._v(t._s(s.name))])])}),0)},i=[],c=(e("c5f6"),{props:{switches:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},methods:{switchItem:function(t){this.$emit("switch",t)}}}),n=c,a=(e("984f"),e("2877")),r=Object(a["a"])(n,o,i,!1,null,"189771df",null);s["a"]=r.exports},"984f":function(t,s,e){"use strict";var o=e("0361"),i=e.n(o);i.a},ff9c:function(t,s,e){}}]);
//# sourceMappingURL=chunk-dc496056.c61af334.js.map