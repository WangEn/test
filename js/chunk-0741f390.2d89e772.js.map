{"version":3,"sources":["webpack:///./src/components/catalog/catalog.vue?8749","webpack:///./src/components/catalog/catalog.vue?f896","webpack:///src/components/catalog/catalog.vue","webpack:///./src/components/catalog/catalog.vue?2dd1","webpack:///./src/components/catalog/catalog.vue?bdc6"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_catalog_vue_vue_type_style_index_0_id_42031fa3_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_catalog_vue_vue_type_style_index_0_id_42031fa3_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","back","_v","$event","changeOrder","_s","orderBy","ref","attrs","data","chapters","options","pulling-up","onPullingUp","_l","chapter","key","_id","chapter_level","href","chapter_name","goRead","bookId","staticRenderFns","catalogvue_type_script_lang_js_","pageIndex","isShowMore","pullUpLoad","pullUpLoadThreshold","pullUpLoadMoreTxt","pullUpLoadNoMoreTxt","computed","pullUpLoadObj","threshold","parseInt","txt","more","noMore","created","$route","params","id","console","log","getBookChapter","mounted","_this","$nextTick","$refs","scroll","refresh","methods","$router","_this2","nid","pn","num","order","$post","then","res","code","result","concat","length","setTimeout","toast","$createToast","type","mask","time","show","forceUpdate","_this3","push","path","catalog_catalogvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-0741f390.2d89e772.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalog.vue?vue&type=style&index=0&id=42031fa3&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalog.vue?vue&type=style&index=0&id=42031fa3&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-arrow icon-arrow-l\"})]),_c('div',{staticClass:\"title\"},[_vm._v(\"书籍目录\")]),_c('div',{staticClass:\"sort\",on:{\"click\":function($event){return _vm.changeOrder()}}},[_vm._v(_vm._s(_vm.orderBy? '倒序': '正序'))])]),_c('cube-scroll',{ref:\"scroll\",staticClass:\"list-wrap\",attrs:{\"data\":_vm.chapters,\"options\":_vm.options},on:{\"pulling-up\":_vm.onPullingUp}},[_c('ul',_vm._l((_vm.chapters),function(chapter){return _c('li',{key:chapter._id},[(chapter.chapter_level==1)?_c('a',{staticClass:\"bar\",attrs:{\"href\":\"javascript:;\"}},[_c('span',[_vm._v(_vm._s(chapter.chapter_name))])]):_c('a',{staticClass:\"idx\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.goRead(_vm.bookId, chapter._id)}}},[_c('span',[_vm._v(_vm._s(chapter.chapter_name))]),_c('i',{staticClass:\"icon-arrow\"})])])}),0)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"container\">\n            <div class=\"header\">\n                <div class=\"back\" @click=\"back\">\n                    <i class=\"icon-arrow icon-arrow-l\"></i>\n                </div>\n                <div class=\"title\">书籍目录</div>\n                <div class=\"sort\" @click=\"changeOrder()\">{{orderBy? '倒序': '正序'}}</div>\n            </div>\n        \n            <cube-scroll\n                ref=\"scroll\"\n                :data=\"chapters\"\n                :options=\"options\"\n                @pulling-up=\"onPullingUp\"\n                class=\"list-wrap\">\n                <ul>\n                    <li v-for=\"chapter in chapters\" :key=\"chapter._id\">\n                        <a class=\"bar\" href=\"javascript:;\" v-if=\"chapter.chapter_level==1\">\n                            <span>{{chapter.chapter_name}}</span>\n                        </a>\n                        <a class=\"idx\" href=\"javascript:;\" @click=\"goRead(bookId, chapter._id)\" v-else>\n                            <span>{{chapter.chapter_name}}</span>\n                            <i class=\"icon-arrow\"></i>\n                        </a>\n                    </li>\n                </ul>\n            </cube-scroll>\n        \n        </div>\n    </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\nexport default {\n    data() {\n        return {\n            chapters: [], // 目录列表\n            orderBy: 1, //默认1 正序\n            pageIndex: 1, // 初始页面1\n            bookId: 1,\n            isShowMore: false, // 是否获取到更多数据\n            pullUpLoad: true,\n            pullUpLoadThreshold: 0,\n            pullUpLoadMoreTxt: '加载中...',\n            pullUpLoadNoMoreTxt: '没有更多数据啦',\n        }\n    },\n    computed: {\n        options() {\n            return {\n                pullUpLoad: this.pullUpLoadObj\n            }\n        },\n        pullUpLoadObj: function() {\n            return this.pullUpLoad ? {\n                threshold: parseInt(this.pullUpLoadThreshold),\n                txt: {\n                    more: this.pullUpLoadMoreTxt,\n                    noMore: this.pullUpLoadNoMoreTxt\n                }\n            } : false\n        }\n    },\n    created(){\n        this.bookId = this.$route.params.id\n        console.log(this.bookId)\n        this.getBookChapter()\n    },\n    mounted(){\n        this.$nextTick(()=>{\n            this.$refs.scroll.refresh() \n        })\n    },\n    methods: {\n        back() {\n            this.$router.back();\n        },\n        changeOrder(){\n            this.orderBy = !this.orderBy\n            this.pageIndex = 1\n            this.chapters = []\n            this.getBookChapter()\n        },\n        getBookChapter() {\n            // 获取书籍\n            let data = {\n                nid: this.bookId,\n                pn: this.pageIndex,\n                num: 20,\n                order: this.orderBy? 1: 0\n            }\n            this.$post('/chapter/pages', data)\n                .then((res) => {\n                    // console.log(res)\n                    if(res.code === 10000){\n                        let result = res.result\n                        this.chapters = this.chapters.concat(result)\n                        \n                        this.isShowMore = result && result.length\n                        if(this.isShowMore){\n                            //有新数据\n                            setTimeout(()=>{\n                                this.$refs.scroll.refresh()\n                            }, 500) \n                        }else{\n                            const toast = this.$createToast({\n                                txt: '暂无更多目录信息',\n                                type: 'txt',\n                                mask: true,\n                                time: 2000\n                            })\n                            toast.show()\n                            this.pullUpLoad = false\n                            this.$refs.scroll.forceUpdate()\n                        }\n                    }\n                })\n        },\n        onPullingUp() {\n            // 更新数据\n            setTimeout(() => {\n                this.pageIndex += 1\n                this.getBookChapter()\n                \n            }, 1000)\n        },\n        goRead(id, chapter) {\n            this.$router.push({\n                path: `/read/${id}/${chapter}`\n            })\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n    @import 'common/stylus/variable'\n    @import 'common/stylus/mixin'\n\n\n    .icon-arrow\n        border-right 1px solid @color-text-d\n        border-top 1px solid @color-text-d\n        height 10px\n        width 10px\n        -webkit-transform rotate(45deg)\n        transform rotate(45deg)\n        border-color #000000\n        border-left none\n        border-bottom none\n        display inline-block\n\n    // 上空心箭头\n    .icon-arrow-t\n        -webkit-transform rotate(-45deg)\n        transform rotate(-45deg)\n    // 下空心箭头\n    .icon-arrow-b\n        -webkit-transform rotate(135deg)\n        transform rotate(135deg)\n    // 左空心箭头\n    .icon-arrow-l\n        -webkit-transform rotate(-135deg)\n        transform rotate(-135deg)\n\n    .container\n        position: absolute\n        top: 0\n        bottom: 0\n        left: 0\n        width: 100%\n\n\n    .header\n        width 345px\n        height 45px\n        padding 0 15px\n        we-flex()\n        justify-content space-between\n        align-items center\n        border-bottom 1px solid #eeeeee\n        .title\n            font-size 17px\n        .sort\n            font-size 14px\n\n    .list-wrap\n        width 375px\n        margin 0 auto\n        ul\n            we-flex()\n            flex-direction column\n            li\n                text-align left \n                width 100%\n                .bar\n                    font-size 13px\n                    line-height 28px\n                    padding 8px 16px 0\n                    color #969ba3\n                    background #f6f7f9\n                .idx\n                    font-size 14px\n                    padding 12px 16px\n                    we-flex()\n                    justify-content space-between\n                    span \n                        color #333333\n                    i \n                        width 4px\n                        height 4px\n                &:after\n                    display block\n                    margin-top -1px\n                    margin-left 16px\n                    content ''\n                    border-top 1px solid #f0f1f2\n\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--16-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--16-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./catalog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./catalog.vue?vue&type=template&id=42031fa3&scoped=true&\"\nimport script from \"./catalog.vue?vue&type=script&lang=js&\"\nexport * from \"./catalog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./catalog.vue?vue&type=style&index=0&id=42031fa3&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42031fa3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}